{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/maxime/Documents/Mes_projets/EPSI/YamMaster/yam-master-app/app/controllers/online-game.controller.js\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { SocketContext } from '../contexts/socket.context';\nimport { useNavigation } from \"@react-navigation/native\";\nimport Board from \"../components/board/board.component\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function OnlineGameController() {\n  var navigation = useNavigation();\n  var socket = useContext(SocketContext);\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    inQueue = _useState2[0],\n    setInQueue = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    inGame = _useState4[0],\n    setInGame = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    idOpponent = _useState6[0],\n    setIdOpponent = _useState6[1];\n  var leaveQueue = function leaveQueue() {\n    console.log('[emit][queue.leave]:', socket.id);\n    socket.emit(\"queue.leave\");\n  };\n  useEffect(function () {\n    console.log('[emit][queue.join]:', socket.id);\n    socket.emit(\"queue.join\");\n    setInQueue(false);\n    setInGame(false);\n    socket.on('queue.added', function (data) {\n      console.log('[listen][queue.added]:', data);\n      setInQueue(data['inQueue']);\n      setInGame(data['inGame']);\n    });\n    socket.on('queue.removed', function (data) {\n      console.log('[listen][queue.removed]:', data);\n      setInQueue(data['inQueue']);\n      setInGame(data['inGame']);\n      navigation.navigate('HomeScreen');\n    });\n    socket.on('game.start', function (data) {\n      console.log('[listen][game.start]:', data);\n      setInQueue(data['inQueue']);\n      setInGame(data['inGame']);\n      setIdOpponent(data['idOpponent']);\n    });\n    return leaveQueue;\n  }, []);\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [!inQueue && !inGame && _jsxDEV(_Fragment, {\n      children: _jsxDEV(Text, {\n        style: styles.paragraph,\n        children: \"Waiting for server datas...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this)\n    }, void 0, false), inQueue && _jsxDEV(_Fragment, {\n      children: [_jsxDEV(Text, {\n        style: styles.paragraph,\n        children: \"Waiting for another player...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this), _jsxDEV(Button, {\n        title: \"Quitter la file d'attente\",\n        onPress: leaveQueue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true), inGame && _jsxDEV(_Fragment, {\n      children: _jsxDEV(Board, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this)\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 9\n  }, this);\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#fff\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    width: '100%',\n    height: '100%'\n  },\n  paragraph: {\n    fontSize: 16\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","useContext","Button","StyleSheet","Text","View","SocketContext","useNavigation","Board","jsxDEV","_jsxDEV","Fragment","_Fragment","OnlineGameController","navigation","socket","_useState","_useState2","_slicedToArray","inQueue","setInQueue","_useState3","_useState4","inGame","setInGame","_useState5","_useState6","idOpponent","setIdOpponent","leaveQueue","console","log","id","emit","on","data","navigate","style","styles","container","children","paragraph","fileName","_jsxFileName","lineNumber","columnNumber","title","onPress","create","flex","backgroundColor","alignItems","justifyContent","width","height","fontSize"],"sources":["/Users/maxime/Documents/Mes_projets/EPSI/YamMaster/yam-master-app/app/controllers/online-game.controller.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { Button, StyleSheet, Text, View } from \"react-native\";\nimport { SocketContext } from '../contexts/socket.context';\nimport { useNavigation } from \"@react-navigation/native\";\nimport Board from \"../components/board/board.component\";\n\n\nexport default function OnlineGameController() {\n\n    const navigation = useNavigation();\n\n    const socket = useContext(SocketContext);\n\n    const [inQueue, setInQueue] = useState(false);\n    const [inGame, setInGame] = useState(false);\n    const [idOpponent, setIdOpponent] = useState(null);\n\n    const leaveQueue = () => {\n        console.log('[emit][queue.leave]:', socket.id);\n        socket.emit(\"queue.leave\");\n    }\n\n    useEffect(() => {\n        console.log('[emit][queue.join]:', socket.id);\n        socket.emit(\"queue.join\");\n        setInQueue(false);\n        setInGame(false);\n\n        socket.on('queue.added', (data) => {\n            console.log('[listen][queue.added]:', data);\n            setInQueue(data['inQueue']);\n            setInGame(data['inGame']);\n        });\n\n        socket.on('queue.removed', data => {\n            console.log('[listen][queue.removed]:', data);\n            setInQueue(data['inQueue']);\n            setInGame(data['inGame']);\n            navigation.navigate('HomeScreen');\n        })\n\n        socket.on('game.start', (data) => {\n            console.log('[listen][game.start]:', data);\n            setInQueue(data['inQueue']);\n            setInGame(data['inGame']);\n            setIdOpponent(data['idOpponent']);\n        });\n\n        return leaveQueue;\n    }, []);\n\n    return (\n        <View style={styles.container}>\n            {!inQueue && !inGame && (\n                <>\n                    <Text style={styles.paragraph}>\n                        Waiting for server datas...\n                    </Text>\n                </>\n            )}\n\n            {inQueue && (\n                <>\n                    <Text style={styles.paragraph}>\n                        Waiting for another player...\n                    </Text>\n                    <Button\n                        title=\"Quitter la file d'attente\"\n                        onPress={leaveQueue}\n                    />\n                </>\n            )}\n\n            {inGame && (\n                <>\n                    <Board />\n                </>\n            )}\n        </View>\n    );\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        backgroundColor: \"#fff\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        width: '100%',\n        height: '100%',\n    },\n    paragraph: {\n        fontSize: 16,\n    }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}